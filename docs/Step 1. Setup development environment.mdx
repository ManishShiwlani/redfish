# Step 1. Setup development environment
## Prerequisites
* Make sure you have:
   * [python3.7](https://www.python.org/downloads/)
   * [npm](https://www.npmjs.com/get-npm)
   * [git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)
## 1. Getting started
* Go to [Redfish page](https://github.com/guandjoy/redfish) and fork the repo
* In settings change the __Repository name__ to a name of your application
* Clone a new repo locally with __ssh__: 
```console
$ git clone git@github.com:username/your-app-name.git
```
Or use __https__: `git clone https://github.com/username/your-app-name.git`\
_Note: We recommend to use ssh, so you don't need to setup credentials._
* Go to the root of `django_server`:
```console
$ cd name-of-app/src/django_server
```
## 2. Setup Django server
### 2.1. Setup [virtual environment](https://virtualenv.pypa.io/en/latest/)
* Install, create, and start [virtual environment](https://virtualenv.pypa.io/en/latest/):
```console
$ python3.7 -m pip install virtualenv
...
$ virtualenv -p python3.7 venv
...
$ source venv/bin/activate
```
### 2.2. Install dependencies
```console
$ pip install -r requirements.txt
```
### 2.3. Prepare settings.py
* Copy and rename `settings.dev.py` file as `settings.py` inside of the `django_server` app folder:
```console
$ cp django_server/settings.dev.py django_server/settings.py
```
* Generate `SECRET_KEY`:
```console
$ python redfish/generate_secret_key.py
Paste the next string to the settings.py SECRET_KEY constant
kpvmoz93s_3*rs7i*$t5-g%x5df7!vr(7=$ie2$6pj%!5=e*8@
```
* Copy and paste it to the `SECRET_KEY` constant inside of the `settings.py` file:
```python
# settings.py
SECRET_KEY = 'kpvmoz93s_3*rs7i*$t5-g%x5df7!vr(7=$ie2$6pj%!5=e*8@'
```
### 2.4. Create Google mail app password and setup SMTP server:
- Go to google app passwords: https://myaccount.google.com/apppasswords \
_Note: Make sure you turned on 2-step verification. Google restrict app passwords for users who don't._
- Select app: `mail`;
- Select device: `Other (custom name)`;
- Fill the name, e.g., `redfish-django-server`;
- Press `Generate` button;
- Copy and paste the `password` to the `settings.py` file and provide your `GMail email`:
```python
# settings.py
...
EMAIL_HOST_USER = 'example@gmail.com'
EMAIL_HOST_PASSWORD = 'vcnstblmegxxkvkf'
...
```
### 2.5. Apply migrations
```console
$ python manage.py migrate
```
## 3. Install `react-app` dependencies
```console
$ cd ../react-app/
$ npm install
```
## 4. Install `landing-page` dependencies
```console
$ cd ../landing-page/
$ npm install
```
## 5. Start development servers
We have three development servers here: __Django, Create React App, and GatsbyJS__. You can start them withing 3 console windows, or, as we highly recommend, withing [tmux](https://github.com/tmux/tmux/blob/master/.github/README.md).

### 5.1. Start with terminal windows
* Prepare 3 terminal instances
* Start `django_server`:
```console
$ python manage.py runserver 0.0.0.0:9000
```
* Start `react-app` development server:
```console
$ npm start
```
* Start `landing-page` development server:
```console
$ gatsby develop
```
### 5.2. Start with [tmux](https://github.com/tmux/tmux/blob/master/.github/README.md).
We already made a python script, which creates tmux windows and start Django, CRA, and GatsbyJS development servers. 
_Note: Make sure your virtual environment is located in `/src/django_server/venv` folder_
* Execute the `tmux_setup.py` script with `python>=3.6`
```console
$ python tmux_setup.py
```
* Read [tmux man](http://man.openbsd.org/OpenBSD-current/man1/tmux.1). Some basics to play with it:
   * `ctrl+b` `w` - navigate through windows using `up` and `down` arrow keys;
   * `ctrl+b` `d` - minimize tmux and save session;
   * `$ tmux a` - back to tmux after minimize it;
   * `ctrl+d` - terminate tmux and session;
   * `ctrl+b` `[` - scroll through the content. Use `up` and `down` arrow keys and `esc` to exit mode;
   * `ctrl+b` `c` - create new window.
### Avaliable endpoints:
* http://localhost:8000/ - landing page
* http://localhost:3006/ - application
* http://localhost:9000/graphql - IDE for exploring GraphQL

## You are ready to develop!
That's it. Note that this step is a prerequisite to the next step, where we learn how to set up production build.
